config:
    name: "find user testcase"
    variables:
        username: ${ENV(USERNAME)}
        password: ${ENV(PASSWORD)}
    base_url: ${ENV(test_url)}
teststeps:
    # 登陆api
-   name: shop login api
    api: api/login_api.yml
    # 导出获取响应的tokenId
    export:
        - tokenId
    # 获取管理员列表api
-   name: get user list api
    api: api/get_user_list_api.yml
    export:
      - userList
    # 导入需要的tokenId
    variables:
      tokenId: ${tokenId}
-   name: /api/private/v1/users/524
    variables:
        userList: ${userList}
    request:
        headers:
            Authorization: ${tokenId}
            Content-Type: application/json;charset=UTF-8
            User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
                (KHTML, like Gecko) Chrome/80.0.3987.163 Safari/537.36
        json:
            email: aa@163.com
            id: ${get_random_users(userList)}
            mobile: '13777777777'
            rid: -1
            username: test2
        method: PUT
        url: /users/524
    validate:
    -   eq:
        - status_code
        - 200
    -   eq:
        - headers.Content-Type
        - application/json; charset=utf-8
